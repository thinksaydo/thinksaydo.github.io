<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kids YouTube</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <!-- <link
        href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css"
        rel="stylesheet"
      /> -->
  </head>
  <body class="flex justify-center items-center h-screen">
    <h1>Kids YouTube</h1>
    <div id="videos" class="videos text-center"></div>
  </body>
  <script type="text/javascript">
    main();

    async function main() {
      renderVideos(await getVideos('UUAW-NpUFkMyCNrvRSSGIvDQ'));
    }

    async function getVideos(playlistId) {
      const key = 'AIzaSyDC21idmQvGvmvdtLZFisTju2pgA9cWSfU';
      return await fetch(
        `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet%2CcontentDetails&maxResults=50&playlistId=${playlistId}&key=${key}`
      ).then(res => JSON.parse(res));
    }
    
    function renderVideos(videos) {
      let videosHTML = '';
      videos.items.forEach((video) => {
        videosHTML = `${videosHTML}<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/${video.contentDetails.videoId}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><br /><br />`;
      });
      console.log(videosHTML);
      document.querySelector('#videos').innerHTML = videosHTML;
  </script>
</html>
